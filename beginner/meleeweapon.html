<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Melee Weapon - tModLoader Guide</title>

	<link rel="stylesheet" href="../style.css">
	<link rel="stylesheet" href="../prism.css">
</head>

<body>
	<h1>Melee Weapon</h1>
	<p>In this guide, we will be making a basic broadsword. Different melee weapons, like a yoyo or spear,
		are harder to make and will be covered in later guides.<br>
		Note: The item that was generated with the mod is a functional sword, but we will be taking a different,
		cleaner approach.</p>
	<p>Table of contents:</p>
	<ol>
		<li><a href="#1">Creating the item</a> - the base for the sword</li>
		<li><a href="#2">Sword functionality</a> - making the sword swingable</li>
	</ol>

	<h2 id="1">Creating the item</h2>
	<p>First, we have to make the base of the item, just like in the <a href="moditem.html">ModItem</a>	guide.</p>
	<p>Create a new public class in Content -> Items inheriting from <code>ModItem</code>. Feel free to	set the
		<code>SetDefaults</code> and add a recipe, like so:</p>
	<pre><code class="language-cs">using Terraria;
using Terraria.ID;
using Terraria.ModLoader;

namespace TutorialMod.Content.Items;

public class TestSword : ModItem
{
	public override void SetDefaults()
	{
		Item.width = 40; // sprite texture (after upscaling) is 40x40
		Item.height = 40; // sprite texture (after upscaling) is 40x40
		Item.maxStack = 1; // no need to actually specify this because the default is 1
		Item.value = Item.sellPrice(0, 0, 50, 0); // sells for 50 silver
		Item.rare = ItemRarityID.Blue; // blue rarity
	}

	public override void AddRecipes()
	{
		CreateRecipe()
			.AddIngredient&lt;TestItem&gt;(10) // 10 modded TestItems - covered in the recipe guide
			.Register();
	}
}</code></pre>
	<p>The sword also needs a texture. If you make one yourself, remember to keep the 2x2 pixel style and modify
		the <code>Item.width</code> and <code>Item.height</code> properties afterwards.<br>
		Otherwise, you can just steal it from somewhere like the autogenerated sword or
		<a href="https://github.com/tModLoader/tModLoader/blob/1.4.4/ExampleMod/Content/Items/Weapons/ExampleSword.png">
		ExampleMod</a>.</p>
		
	<h2 id="2">Sword functionality</h2>
	<p>Let's set some basic properties in <code>SetDefaults</code> common to all swords first.<br>
		First, let's make the sword do melee damage. We can do that by setting <code>Item.DamageType</code>
		to <code>DamageClass.Melee</code>.<br>
		Next, let's swing the sword when we click. To do that, set <code>Item.useStyle</code> to something from
		<code>ItemUseStyleID</code> - for a sword, that'll be <code>ItemUseStyleID.Swing</code>.<br>
		We can also play a sound effect when the sword is swung by setting <code>Item.UseSound</code> to
		<code>SoundID.Item1</code> - that's the swoosh sound swords use.</p>
	<p>Here's how it looks with these properties set:</p>
	<pre><code class="language-cs">public override void SetDefaults()
{
	Item.DamageType = DamageClass.Melee; // set the item's class to melee
	Item.useStyle = ItemUseStyleID.Swing; // swing the item like a sword when used
	Item.UseSound = SoundID.Item1; // play sword swoosh sound when used
	// other item properties
}</code></pre>
	<p>Now we are ready to customize our sword's stats. Some of these are a bit awkward to set, so let's go
		through them one by one.<br>
		For reference, <a href="https://terraria.wiki.gg/wiki/List_of_melee_weapons">here is a list</a> of melee
		weapons with their stats.
	<table>
		<tr>
			<th style="width: 10%;">Property</th>
			<th style="width: 10%;">Data Type</th>
			<th style="width: 30%;">Meaning</th>
			<th style="width: 50%;">Tips</th>
		</tr>
		<tr>
			<td><code>Item.damage</code></td>
			<td>int</td>
			<td>The sword's base damage when used.</td>
			<td></td>
		</tr>
		<tr>
			<td><code>Item.knockBack</code></td>
			<td>float</td>
			<td>How far the attacked enemy is knocked.</td>
			<td></td>
		</tr>
		<tr>
			<td><code>Item.useTime</code><br><code>Item.useAnimation</code></td>
			<td>int</td>
			<td>The time it takes for a single swing of the sword.<br>
				These are in frames, where 60 frames = 1 second.<br>
				A higher use time means less attacks per second.</td>
			<td>For a basic broadsword, make sure both of these are the same value, or the weapon will glitch.<br>
				<code>Item.useTime</code> is the timer for the sword hitbox,<br>
				<code>Item.useAnimation</code> is the timer for the swing animation.<br>
				This distinction is useful for more advanced weapons, like the Clockwork Assault Rifle.</td>
		</tr>
		<tr>
			<td><code>Item.crit</code></td>
			<td>int</td>
			<td>The bonus critical chance this item gives,<br>
				on top of the base 4% crit chance.</td>
			<td>For example, a value of 6 will give this weapon a 10% crit chance (4% + 6% = 10%).<br>
				You don't have to set this if your weapon doesn't give a bonus crit chance, like most weapons.</td>
		</tr>
	</table>
	<p><b>Tip:</b> If you want the sword to be longer, edit the sword's sprite and the <code>Item.width</code>
	and <code>Item.height</code>. This will make its hitbox larger.</p>

	<p>With all these properties set, here's the full <code>SetDefaults</code>:</p>
	<pre><code class="language-cs">public override void SetDefaults()
{
	// sword properties
	Item.DamageType = DamageClass.Melee;
	Item.useStyle = ItemUseStyleID.Swing;
	Item.UseSound = SoundID.Item1;

	Item.damage = 20; // 20 base damage
	Item.knockBack = 5; // average knockback
	Item.useTime = 24; // swing lasts for 24 frames = 0.4s      (these two must be the same)
	Item.useAnimation = 24; // swing lasts for 24 frames = 0.4s (these two must be the same)
	Item.crit = 2; // bonus 2% crit chance -> weapon has 6% crit chance

	// item properties
	Item.width = 40;
	Item.height = 40;
	Item.maxStack = 1;
	Item.value = Item.sellPrice(0, 0, 50, 0);
	Item.rare = ItemRarityID.Blue;
}</code></pre>
	<p>Once you've set these properties, you can start the game, craft or cheat the sword in, and it will work
		like a sword!</p>

	<h2 id="3">Final example</h2>
	<p>A working broadsword file would look something like this:</p>
	<pre><code class="language-cs">using Terraria;
using Terraria.ID;
using Terraria.ModLoader;

namespace TutorialMod.Content.Items;
 
public class TestSword : ModItem
{
	public override void SetDefaults()
	{
		// sword properties
		Item.DamageType = DamageClass.Melee; // makes the sword melee damage
		Item.useStyle = ItemUseStyleID.Swing; // sets the swing animation
		Item.UseSound = SoundID.Item1; // swoosh sound when used

		// sword stats
		Item.damage = 16; // 20 base damage
		Item.knockBack = 3.5f; // weak knockback
		Item.useTime = 20; // swing lasts for 20 frames = 0.33s      (these two must be the same)
		Item.useAnimation = 20; // swing lasts for 20 frames = 0.33s (these two must be the same)
		// weapon has 4% crit chance (Item.crit not set, defaults to 0)

		// item properties
		Item.width = 40; // item texture is 40x40
		Item.height = 40; // item texture is 40x40
		Item.value = Item.sellPrice(0, 0, 50, 0); // sells for 50 silver coins
		Item.rare = ItemRarityID.Blue; // blue rarity
	}

	public override void AddRecipes()
	{
		CreateRecipe() // 1 TestSword for...
			.AddIngredient<TestItem>(8) // 8 TestItems
			.AddTile(TileID.Anvils) // at an anvil
			.Register();
	}
}</code></pre>

	<br>

	<script src="../prism.js"></script>
</body>
</html>